\section{Middleboxes: Design \& Implementation}
\label{sec:mbs}

In Table~\ref{tbl:mbreqs}, we introduced the set of middleboxes typically supported by outsourcing approaches and divided them in to Header, HTTP, and DPI middleboxes. 
We now revisit these middleboxes individually and discuss how they operate over the encrypted data.

\begin{figure}[t]
  \centering
  \includegraphics[width=3in]{fig/mbarch}
  \caption[]{\label{fig:mbarch} Typical middlebox software components. For most middleboxes, packet processing operations in the dataplane remain unmodified by \sys. \justine{Cut? Unnecessary?}}
\end{figure}

\subsection{Header Middleboxes}
Header middleboxes include firewalls,

\subsection{DPI Middleboxes}

\subsection{HTTP Middleboxes}



